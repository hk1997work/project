<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>ecoSignal | Audio Details</title>

    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="project.css" rel="stylesheet">

    <style>
        .compact-layout {
            padding: 12px 16px;
            display: grid;
            grid-template-columns: 7fr 3fr;
            gap: 16px;
            align-items: start;
        }
        .compact-card {
            background: var(--glass-bg);
            border: var(--card-border);
            border-radius: var(--radius);
            box-shadow: var(--card-shadow);
            padding: 16px;
            box-sizing: border-box;
            width: 100%;
        }
    </style>
</head>
<body>

<nav class="project-nav-bar">
    <div class="nav-left">
        <div class="nav-capsule-box">
            <a class="nav-logo" href="index.html">
                <div class="logo-icon-box"><i data-lucide="activity"></i></div>
                <span>ecoSignal</span>
            </a>
            <div class="nav-divider"></div>
            <div class="breadcrumb-group">
                <div class="crumb-wrapper" id="project-wrap">
                    <button class="crumb-btn" onclick="toggleMenu('project-wrap', event)">
                        <span class="block-anim" id="label-project">Project Alpha</span>
                        <i data-lucide="chevron-down" size="14"></i>
                    </button>
                    <div class="crumb-dropdown" id="dropdown-project">
                        <div class="dropdown-search-box">
                            <div class="search-input-wrapper">
                                <i class="search-icon-small" data-lucide="search"></i>
                                <input class="dropdown-input" onclick="event.stopPropagation()" placeholder="Search project..." type="text">
                            </div>
                        </div>
                        <div class="dropdown-list-scroll">
                            <div class="crumb-item selected"><span>Project Alpha</span><i data-lucide="check" class="check-icon"></i></div>
                            <div class="crumb-item"><span>Project Beta</span><i data-lucide="check" class="check-icon" style="display:none;"></i></div>
                        </div>
                    </div>
                </div>
                <span class="crumb-separator">/</span>

                <div class="crumb-wrapper" id="collection-wrap">
                    <button class="crumb-btn" onclick="toggleMenu('collection-wrap', event)">
                        <span class="block-anim" id="label-collection">Site A Collection</span>
                        <i data-lucide="chevron-down" size="14"></i>
                    </button>
                    <div class="crumb-dropdown" id="dropdown-collection">
                        <div class="dropdown-search-box">
                            <div class="search-input-wrapper">
                                <i class="search-icon-small" data-lucide="search"></i>
                                <input class="dropdown-input" onclick="event.stopPropagation()" placeholder="Search collection..." type="text">
                            </div>
                        </div>
                        <div class="dropdown-list-scroll">
                            <div class="crumb-item selected"><span>Site A Collection</span><i data-lucide="check" class="check-icon"></i></div>
                            <div class="crumb-item"><span>Site B Collection</span><i data-lucide="check" class="check-icon" style="display:none;"></i></div>
                        </div>
                    </div>
                </div>
                <span class="crumb-separator">/</span>

                <div class="crumb-wrapper" id="audio-wrap">
                    <button class="crumb-btn" onclick="toggleMenu('audio-wrap', event)">
                        <span class="block-anim" id="label-audio">REC_10100020250000.wav</span>
                        <i data-lucide="chevron-down" size="14"></i>
                    </button>
                    <div class="crumb-dropdown" id="dropdown-audio">
                        <div class="dropdown-search-box">
                            <div class="search-input-wrapper">
                                <i class="search-icon-small" data-lucide="search"></i>
                                <input class="dropdown-input" onclick="event.stopPropagation()" placeholder="Search audio..." type="text">
                            </div>
                        </div>
                        <div class="dropdown-list-scroll">
                            <div class="crumb-item selected"><span>REC_10100020250000.wav</span><i data-lucide="check" class="check-icon"></i></div>
                            <div class="crumb-item"><span>REC_10100020250001.wav</span><i data-lucide="check" class="check-icon" style="display:none;"></i></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="nav-center"></div>

    <div class="nav-right">
        <div class="nav-capsule-box">
            <button class="nav-btn-simple" onclick="toggleTheme()" title="Switch Theme">
                <i data-lucide="moon" id="theme-icon-el" size="20"></i>
            </button>
            <div class="nav-divider"></div>
            <button class="nav-btn-simple" title="Information"><i data-lucide="info" size="20"></i></button>
            <div class="nav-divider"></div>
            <div class="user-wrapper" id="user-menu">
                <div class="user-capsule-btn" onclick="toggleUserMenu(event)">
                    <div class="user-avatar-icon"><i data-lucide="user" size="16"></i></div>
                    <span class="user-name-text">Liudilong</span>
                    <i class="chevron-icon" data-lucide="chevron-down" size="14"></i>
                </div>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="project.html"><i data-lucide="layout-dashboard" size="18"></i>Dashboard</a>
                    <a class="dropdown-item" href="setting.html"><i data-lucide="settings" size="18"></i>Settings</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item danger" href="index.html"><i data-lucide="log-out" size="18"></i>Logout</a>
                </div>
            </div>
        </div>
    </div>
</nav>

<div class="content-wrapper" style="overflow-y: auto; display: flex; flex-direction: column;">
    <div class="compact-layout" style="flex-shrink: 0;">
        <div class="compact-card" style="padding: 12px;">
            <div style="height: 400px; width: 100%; background: #0f172a; border-radius: 8px; overflow: hidden; position: relative; border: 1px solid var(--border-color);">
                <img src="https://ecosound-web.de/ecosound_web/tmp/2044447364/10005255_f7644c9a13d31622281088363recording_f1d6c506_897f_4c5e_8ca9_fe2ab93fef312421328162956812056_1-22050_0-59.8954__1.png"
                     style="width: 100%; height: 100%; object-fit: cover; filter: sepia(1) hue-rotate(60deg) saturate(3) contrast(1.2); mix-blend-mode: screen; opacity: 0.85;"
                     alt="Spectrogram">
            </div>
        </div>
        <div style="min-height: 400px;"></div>
    </div>

    <div style="padding: 0 16px 24px 16px; flex: 1; display: flex; min-height: 400px;">
        <div class="data-main-content" style="width: 100%;">

            <div class="data-toolbar">
                <div class="card-title" id="current-table-title"><i data-lucide="tags"></i> Annotations</div>
                <div class="media-controls">
                    <div class="media-search-box">
                        <i class="media-search-icon" data-lucide="search"></i>
                        <input class="media-search-input" id="data-search-input" placeholder="Search" type="text">
                    </div>
                    <button class="btn-toolbar" title="Reset"><i data-lucide="rotate-ccw" size="14"></i> Reset</button>
                    <button class="btn-toolbar" id="btn-add"><i data-lucide="plus" size="14"></i> Add</button>
                    <button class="btn-toolbar" disabled id="btn-edit"><i data-lucide="pencil" size="14"></i> Edit</button>
                    <button class="btn-toolbar danger" disabled id="btn-delete"><i data-lucide="trash-2" size="14"></i> Delete</button>
                    <button class="btn-toolbar" id="btn-export-csv">
                        <i data-lucide="download" size="12"></i> Export CSV
                    </button>
                </div>
            </div>

            <div class="data-table-container">
                <table class="crud-table">
                    <thead>
                    <tr>
                        <th style="width: 40px; text-align: center; z-index: 20;">
                            <input class="crud-checkbox" type="checkbox">
                        </th>
                        <th><div class="th-header-content">Label</div></th>
                        <th><div class="th-header-content">Start (s)</div></th>
                        <th><div class="th-header-content">End (s)</div></th>
                        <th><div class="th-header-content">Low Freq (Hz)</div></th>
                        <th><div class="th-header-content">High Freq (Hz)</div></th>
                        <th><div class="th-header-content">Confidence</div></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td style="text-align: center;"><input class="crud-checkbox" type="checkbox"></td>
                        <td><span class="media-annotation" style="background: rgba(59, 130, 246, 0.15); color: #3b82f6; box-shadow: none;">Bird_Call</span></td>
                        <td>12.50</td>
                        <td>14.20</td>
                        <td>2500</td>
                        <td>6000</td>
                        <td>0.92</td>
                    </tr>
                    <tr>
                        <td style="text-align: center;"><input class="crud-checkbox" type="checkbox"></td>
                        <td><span class="media-annotation" style="background: rgba(16, 185, 129, 0.15); color: #10b981; box-shadow: none;">Frog_Croak</span></td>
                        <td>45.10</td>
                        <td>46.85</td>
                        <td>1000</td>
                        <td>3000</td>
                        <td>0.85</td>
                    </tr>
                    <tr>
                        <td style="text-align: center;"><input class="crud-checkbox" type="checkbox"></td>
                        <td><span class="media-annotation" style="background: rgba(245, 158, 11, 0.15); color: #f59e0b; box-shadow: none;">Insect_Buzz</span></td>
                        <td>58.00</td>
                        <td>59.50</td>
                        <td>4000</td>
                        <td>8000</td>
                        <td>0.78</td>
                    </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>
</div>

<script>
    lucide.createIcons();

    // 导航栏下拉菜单切换逻辑
    function toggleMenu(id, event) {
        if(event) event.stopPropagation();
        const el = document.getElementById(id);
        const isActive = el.classList.contains('active');
        closeAllMenus();
        if (!isActive) el.classList.add('active');
    }

    function closeAllMenus() {
        document.querySelectorAll('.crumb-wrapper, .user-wrapper').forEach(el => el.classList.remove('active'));
    }

    function toggleUserMenu(event) {
        if(event) event.stopPropagation();
        const menu = document.getElementById('user-menu');
        const isActive = menu.classList.contains('active');
        closeAllMenus();
        if (!isActive) menu.classList.add('active');
    }

    document.addEventListener('click', e => {
        if (!e.target.closest('.crumb-dropdown') && !e.target.closest('.dropdown-menu')) {
            closeAllMenus();
        }
    });

    document.querySelectorAll('.crumb-item').forEach(item => {
        item.addEventListener('click', function(e) {
            e.stopPropagation();
            const siblings = this.parentElement.querySelectorAll('.crumb-item');
            siblings.forEach(s => {
                s.classList.remove('selected');
                const icon = s.querySelector('.check-icon');
                if(icon) icon.style.display = 'none';
            });
            this.classList.add('selected');
            const icon = this.querySelector('.check-icon');
            if(icon) icon.style.display = 'block';

            const text = this.querySelector('span').innerText;
            const wrapId = this.closest('.crumb-wrapper').id;
            const labelId = wrapId.replace('wrap', 'label');
            const labelEl = document.getElementById(labelId);
            if(labelEl) labelEl.innerText = text;

            closeAllMenus();
        });
    });

    // 演示：复选框选中控制工具栏按钮状态
    document.querySelectorAll('tbody .crud-checkbox').forEach(cb => {
        cb.addEventListener('change', function() {
            const tr = this.closest('tr');
            if (this.checked) {
                tr.classList.add('selected');
            } else {
                tr.classList.remove('selected');
            }

            // 如果有选中的行，启用 Edit 和 Delete 按钮
            const anyChecked = document.querySelectorAll('tbody .crud-checkbox:checked').length > 0;
            document.getElementById('btn-edit').disabled = !anyChecked;
            document.getElementById('btn-delete').disabled = !anyChecked;
        });
    });

    // 主题切换功能
    function toggleTheme() {
        const current = document.documentElement.getAttribute('data-theme');
        const target = current === 'dark' ? 'light' : 'dark';
        setTheme(target);
    }

    function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        const iconEl = document.getElementById('theme-icon-el');
        if (iconEl) {
            iconEl.setAttribute('data-lucide', theme === 'dark' ? 'sun' : 'moon');
            lucide.createIcons();
        }
    }

    (function initTheme() {
        const saved = localStorage.getItem('theme');
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const defaultTheme = saved || (systemDark ? 'dark' : 'light');
        setTheme(defaultTheme);
    })();
</script>

</body>
</html>